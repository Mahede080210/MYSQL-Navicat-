# MySQL经验：

> 这是笔者在学习MySQL数据库时总结的经验，希望对你有帮助。
--------------------------------------------------------------------------------------
# 中文字符集的配置方法：（解决汉字乱码的方法）

 ### 将mysql字符集默认为utf8，就不会出现问题了
  
  （1）首先以管理员的身份打开MySQL的虚拟主机（必须以管理员的身份，否则出错）
  （2）用`show variables like 'char%'`查看主机的系统变量的默认值如下操作

![](http://img3.imgtn.bdimg.com/it/u=2412101824,1844181161&fm=27&gp=0.jpg)
    

   (3)然后打开MySQL所在目录，打开`my.ini`在里面找到**[mysqld]**,配置`character_set_server=utf8`


找到**[client]**,配置`default-character-set=utf8`


找到**[mysql]**,配置`default-character-set=utf8`

如下操作：
![](http://jingyan.baidu.com/album/d5a880ebb7a40513f147cc87.html?picindex=3)

![](http://jingyan.baidu.com/album/d5a880ebb7a40513f147cc87.html?picindex=4)

   (4)打开mysql命令行（管理员身份），执行

```
mysqld remove;
mysqld install;

```
然后就可以正常使用了

```
net start mysql;
mysql -u root -p;

```
输入密码；

### 注意：使用汉语必须是字符集默认为utf8后，然后新建库，其对象才能使用汉语，之前建立的库以及库的对象
### 还是不支持汉语
-----------------------------------------------------------------------------------------------

# 建库必知：
-----------------------------
## 1.建库步骤：
   
（1）针对问题设计ER图，即找出所有实体（元）以及各个实体之间的关系（一对一，一对多，多对多）
（2）为每一个实体设计独立的表，为每个属性（字段）设置合适的类型和约束条件
（3）为每一个表制定一个主键（primary key）
（4）对应ER图中各个实体的关系，为各个表设计外键（foreign key）

-------------
说明：
（1）**ER图**：

> 两个实体的关系：
                 一对多：比如一个学生只能对应一个班级;
                 一对一：比如一个老师只能对应一个选修课程;
                 多对多：比如学生和选修课程之间多对多，一个学生可以选多个选修，一个选修可由多个学生选择。

![](https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1511873359785&di=e38c3c6da52e4192b910dd54771ce2a5&imgtype=0&src=http%3A%2F%2Fimage.lxway.com%2Fupload%2F3%2F1c%2F31c227697c089188b57f9beb69f2c2c4.jpg)

（2）**主键的选择**：唯一性，非空性，可以自己制定一个没有意义的字段当作主键。

（3）**外键的选择**：

   情景一：当两个实体之间为一对多的关系时，将“一”端表的主键当作“多”端的外键

   情景二：当两个实体之间为一对一的关系时，外键相互都可以。

   情景三：当两个实体之间为多对多的关系时，这时需要设计一个另外的表，这两个实体的主键都可作为新
表的外键。



代码易错点;
=========

1. insert into 表名 **values**(参数);   //

2. show variables **like** '变量名';

3. constraint class_no_fk foreign kay(class_no) refererences stu(class_no);  //容易丢掉references stu(class_no)

4. alter table auto_increment=<数值>        //对自增型数值的设置

5. delete from <table_name> where()          //删除表中的记录

6. index <索引名> (字段名(length))            //设置索引，length不能超过字段初始设置的长度

7. alter table <table_name> drop foreign key <外键名>;   //删除外键
概念易混淆点：

3. show **create** database 库名;  // **显示库的具体信息**。

4. show databases;      //显示有哪些库

5. show **create** table 表名;    //显示该表的信息，比如存储引擎等

6. show tables;   //显示有哪些表

7. select * from 表名;    //显示表里的具体内容

8. alter table <table_name> rename/add/drop/change ......;     //对表的改变



注意啦！！！
==============
区别：
 `create table <new_table_name> like <table_name>`
 
 `create table <new_table_name> select * from <table_name> `

两种用法都是copy一个已有的表：
1. 用like只是复制表的结构，不复制表的记录，而用select不仅复制了表的结构，还有记录
2. 但是，select会导致新表重新设置**自增值类型为默认值为0**,like**自增值初始为1**.

比如下面例子：

原表：
```
mysql> show create table choose;
+--------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table  | Create Table                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
+--------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| choose | CREATE TABLE `choose` (
  `course_no` int(11) NOT NULL **AUTO_INCREMENT**,
  `course_name` varchar(20) NOT NULL,
  `up_limit` int(11) NOT NULL DEFAULT '60',
  `description` varchar(100) DEFAULT '暂无',
  `status` enum('已审核','未审核') NOT NULL DEFAULT '未审核',
  `teacher_no` int(11) NOT NULL,
  UNIQUE KEY `course_no` (`course_no`),
  UNIQUE KEY `teacher_no` (`teacher_no`)
) ENGINE=InnoDB **AUTO_INCREMENT=1601015 **DEFAULT CHARSET=utf8            |
```

新表：
--------------------------------------

 用**like**语句：
```
mysql> create table choose1 like choose;
Query OK, 0 rows affected (0.27 sec)

mysql> show create table choose1;
+---------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table   | Create Table                                                                                                                                                                                                                                                                                                                                                                                                                           |
+---------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| choose1 | CREATE TABLE `choose1` (
  `course_no` int(11) NOT NULL AUTO_INCREMENT,
  `course_name` varchar(20) NOT NULL,
  `up_limit` int(11) NOT NULL DEFAULT '60',
  `description` varchar(100) DEFAULT '暂无',
  `status` enum('已审核','未审核') NOT NULL DEFAULT '未审核',
  `teacher_no` int(11) NOT NULL,
  UNIQUE KEY `course_no` (`course_no`),
  UNIQUE KEY `teacher_no` (`teacher_no`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8            |
```
并运行
```
mysql> insert into choose1(course_name,up_limit,teacher_no) values('Java编程语言',150,02);
Query OK, 1 row affected (0.06 sec)

mysql> select * from choose1;
+-----------+------------------+----------+-------------+-----------+------------+
| course_no | course_name      | up_limit | description | status    | teacher_no |
+-----------+------------------+----------+-------------+-----------+------------+
|         1 | Java编程语言     |      150 | 暂无        | 未审核    |          2 |
+-----------+------------------+----------+-------------+-----------+------------+
```
## 注意自增值变为 *1* 了！！！！！！

------------------------------------------------------

---------------------------------------------------
用**select**语句：
```

mysql> create table choose1 select * from choose;
Query OK, 3 rows affected (0.32 sec)
Records: 3  Duplicates: 0  Warnings: 0

mysql> show create  table choose1;
+---------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table   | Create Table                                                                                                                                                                                                                                                                                                                                      |
+---------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| choose1 | CREATE TABLE `choose1` (
  `course_no` int(11) NOT NULL **DEFAULT '0'**,
  `course_name` varchar(20) NOT NULL,
  `up_limit` int(11) NOT NULL DEFAULT '60',
  `description` varchar(100) DEFAULT '暂无',
  `status` enum('已审核','未审核') NOT NULL DEFAULT '未审核',
  `teacher_no` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8            |
```
注意：这里的**自增值被默认始终为0**
-------------------------------------------------------------------


